# ЖКХ. Комплекс
Основным назначением Системы является обеспечение автоматизации процессов по мониторингу деятельности УК и проведения капитального ремонта общего имущества в многоквартирных домах.

Продукт ЖКХ. Комплекс разработан на платформе Барс.Б4 версия 3.

Системная платформа Б4 базируется на платформе .NET Framework - программной технологии от компании Microsoft, предназначенная для создания обычных программ и веб-приложений. 
В качестве ядра используется набор технологий и компонентов, обеспечивающих продукт концепциями MVC, ORM, DI и т.д.

Документация по серверной части Платформы Барс.Б4  - http://docs.bars-open.ru/b4docs/

Документация по клиентской части Платформы Барс.Б4 - http://docs.bars-open.ru/b4docsjs/

## Структура решения Bars.Gkh
`Bars.Gkh.App` - Основной запускаемый проект

`Bars.Gkh.Executor` - отдельное приложение для выполнения ресурсоемких операций (Выполнение ресурсоемких задач на сервере фоновых задач)

`Bars.Gkh.MasterApp` - изпользуется как служба которая запускает Bars.Gkh.Executor

`Bars.Gkh.RegionLoader` - используется как служба для подключения необходимый зависимотей в проект для регионов

`Bars.Gkh` - главный модуль, на который ссылаются все проекты решения

Настройка подключения к БД в файле `Main\Bars.Gkh.App\b4.config`

Сторонние библиотеки в папке `packages`

Менеджер пакетов находится в папке `.paket`

## Начало работы

1. Склонировать репозиторий https://stash.bars-open.ru/projects/GKH/repos/gkh/browse\ 

2. Установить пакеты\
2.1. открываем консоль (cmd, powershell)\
2.2. переходим в папку с репо ЖКХ (cd X:\<REPOS>\gkh)\
2.3. выполняем ```.\.paket\paket.bootstrapper.exe```\
2.4. выполняем ```.\.paket\paket.exe restore```

3. Добавить файл конфига\
3.1. Создать копию файла Main\Bars.Gkh.App\b4.config и дать ему имя b4.user.config.\
3.2. Настроить подходящие настройки конфигурации (в первую очередь - подключение к БД)\

4. Собрать сборку для региона\
4.1. Запустить Main\Bars.Gkh.RegionLoader\
4.2. Выбрать необходимый регион

## Разработка

В проекте используется язык C# 7 (Framework 4.6.1) . Клиентская часть - язык JavaScript на основе ExtJs версии 4.1.1

Используемые в проекте технологии:

Castle Windsor - IoC-контейнер 
NHibernate - ORM 
Stimulsoft Report - генератор отчетов 
PostgreSQL - СУБД 
RabbitMQ - очередь задач для выполнения ресурсоемких задач на сервере фоновых операций

### Cреда разработки
- [Visual Studio 2019+](https://visualstudio.microsoft.com/ru/vs/community/) или [Jetbrains Rider](https://www.jetbrains.com/rider/)
- [PostgreSQL](https://www.postgresql.org/download/) v9.6+
- pgAdmin3 или pgAdmin4 [скачать](https://www.pgadmin.org/download/) или что-то другое
- [Google Chrome](https://www.google.com/chrome/)
- [Git](https://git-scm.com/):
  - [Fork](https://git-fork.com/)
  - [Source Tree](https://www.sourcetreeapp.com/)
  - [Git Extensions](https://gitextensions.github.io/)
  
### Корневые файлы репозитория
– .gitattributes - атрибуты для git репозитория\
– .gitignore - описание списка/шаблона файлов/директорий, которые должны игнорироваться гитом (изменения игнорируются)\
– Bars.Gkh.Main.sln - структурированный основной файл проекта, который используется для организации проектов в IDE. Cодержит информацию в текстовом виде о среде проекта, состоянии проекта и хранит параметры, специфичные для проекта.\
– .Bars.Gkh.Main.sln.DotSettings - файл с настройками по стилю кода C# и другие настройки\
– CommonAssemblyInfo.cs - файл содержит основную краткую информацию о текущей версии проекта и компании\
– paket.dependencies, paket.lock - настройки зависимостей nuget пакетов приложения Bars.B4\
– Settings.StyleCop - настройки анализатора редактора кода (IDE)